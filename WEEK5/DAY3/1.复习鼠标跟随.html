<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>珠峰培训2017-10JS</title>
    <style>
        #box{
            width: 400px;
            height: 300px;
            background: url("img/1.jpg") no-repeat center;
            background-size: 100% 100%;
            position: relative;
            top:100px;
            margin: 0 auto;
        }

        #mark{
            position: absolute;
            width: 100px;
            height: 80px;
            background: url("img/camera.png") no-repeat;
            background-size: 100% 200%;
            background-color: #f0f0f0;
            cursor: move;
            opacity: 0.6;
        }
    </style>
</head>
<body>
<div id="box"></div>
</body>
</html>
<script src="public.js">
</script>
<script>
    var box=document.getElementById("box");
    var L=public.offset(box).left;
    var T=public.offset(box).top;
    var W=box.offsetWidth;
    var H=box.offsetHeight;
    var minL=0,minT=0;
    var maxL=null,maxT=null;
    box.onmouseenter=function (e) {
        var mark=document.createElement("div");
        mark.id="mark";
        this.appendChild(mark);
        maxL=W-mark.offsetWidth;
        maxT=H-mark.offsetHeight;
        box.onmousemove=function (e) {

            var l=e.clientX-L-mark.offsetWidth/2;
            var t=e.clientY-T-mark.offsetHeight/2;
            l=l<minL?0:l>maxL?maxL:l;
            t=t<minT?0:t>maxT?maxT:t;
            public.css(mark,{left:l,top:t})
        }
    };
    box.onmouseleave=function (e) {
        var mark=document.getElementById("mark");
        this.removeChild(mark);
    }
</script>